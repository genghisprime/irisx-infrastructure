---
title: 'Create Webhook Endpoint'
api: 'POST /v1/webhooks/endpoints'
description: 'Register a new webhook endpoint to receive event notifications'
---

## Overview

Create a webhook endpoint to receive real-time notifications for call, SMS, and email events. IRISX will POST event data to your URL with HMAC signature verification.

## Authentication

<ParamField header="X-API-Key" type="string">
  API key for server-to-server authentication
</ParamField>

<ParamField header="Authorization" type="string">
  Bearer token for user authentication
</ParamField>

## Request Body

<ParamField body="url" type="string" required>
  Your webhook endpoint URL (must be HTTPS)
</ParamField>

<ParamField body="events" type="array" required>
  Array of events to subscribe to
</ParamField>

<ParamField body="description" type="string">
  Description for this webhook
</ParamField>

### Available Events

- `call.initiated` - Call started
- `call.ringing` - Phone ringing
- `call.answered` - Call answered
- `call.completed` - Call completed
- `call.failed` - Call failed
- `sms.sent` - SMS sent
- `sms.delivered` - SMS delivered
- `sms.failed` - SMS failed
- `email.sent` - Email sent
- `email.delivered` - Email delivered
- `email.opened` - Email opened
- `email.clicked` - Link clicked
- `email.bounced` - Email bounced

## Response

<ResponseField name="webhook" type="object">
  Created webhook object

  <Expandable title="Webhook properties">
    <ResponseField name="id" type="integer">
      Webhook ID
    </ResponseField>
    <ResponseField name="url" type="string">
      Webhook endpoint URL
    </ResponseField>
    <ResponseField name="events" type="array">
      Subscribed events
    </ResponseField>
    <ResponseField name="enabled" type="boolean">
      Whether webhook is active
    </ResponseField>
    <ResponseField name="secret" type="string">
      HMAC secret for signature verification
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>

```bash cURL
curl -X POST https://api.useiris.com/v1/webhooks/endpoints \
  -H "X-API-Key: YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://yourapp.com/webhooks/irisx",
    "events": ["call.completed", "sms.delivered"],
    "description": "Production webhook"
  }'
```

```javascript Node.js
const axios = require('axios');

async function createWebhook(url, events, description) {
  const response = await axios.post(
    'https://api.useiris.com/v1/webhooks/endpoints',
    {
      url,
      events,
      description
    },
    {
      headers: {
        'X-API-Key': 'YOUR_API_KEY',
        'Content-Type': 'application/json'
      }
    }
  );

  const webhook = response.data.webhook;
  console.log('Webhook created:', webhook.id);
  console.log('Secret:', webhook.secret);

  // Store secret securely for signature verification
  return webhook;
}

createWebhook(
  'https://yourapp.com/webhooks/irisx',
  ['call.completed', 'sms.delivered'],
  'Production webhook'
);
```

```python Python
import requests

def create_webhook(url, events, description):
    response = requests.post(
        'https://api.useiris.com/v1/webhooks/endpoints',
        json={
            'url': url,
            'events': events,
            'description': description
        },
        headers={'X-API-Key': 'YOUR_API_KEY'}
    )

    if response.status_code == 201:
        webhook = response.json()['webhook']
        print(f"Webhook created: {webhook['id']}")
        print(f"Secret: {webhook['secret']}")
        return webhook
```

</RequestExample>

<ResponseExample>

```json Success Response (201)
{
  "webhook": {
    "id": 1,
    "tenant_id": 1,
    "url": "https://yourapp.com/webhooks/irisx",
    "events": ["call.completed", "sms.delivered"],
    "enabled": true,
    "secret": "whsec_a1b2c3d4e5f6g7h8i9j0",
    "created_at": "2025-10-30T18:00:00Z",
    "updated_at": "2025-10-30T18:00:00Z"
  }
}
```

</ResponseExample>

## Webhook Payload

IRISX sends POST requests with this format:

```json
{
  "event": "call.completed",
  "timestamp": "2025-10-30T18:02:15Z",
  "data": {
    "uuid": "123e4567-e89b-12d3-a456-426614174000",
    "status": "completed",
    "duration": 125,
    "cost": 0.015
  }
}
```

## Signature Verification

Verify webhook authenticity using HMAC-SHA256:

```javascript
const crypto = require('crypto');

function verifyWebhookSignature(payload, signature, secret) {
  const hmac = crypto.createHmac('sha256', secret);
  hmac.update(JSON.stringify(payload));
  const expectedSignature = hmac.digest('hex');

  return crypto.timingSafeEqual(
    Buffer.from(signature),
    Buffer.from(expectedSignature)
  );
}

// Express.js handler
app.post('/webhooks/irisx', (req, res) => {
  const signature = req.headers['x-irisx-signature'];
  const isValid = verifyWebhookSignature(req.body, signature, WEBHOOK_SECRET);

  if (!isValid) {
    return res.status(401).send('Invalid signature');
  }

  // Process webhook
  console.log('Event:', req.body.event);
  res.status(200).send('OK');
});
```

<Warning>
  Always verify webhook signatures to prevent unauthorized requests!
</Warning>

## Best Practices

1. **Return 200 quickly** - Process webhooks asynchronously
2. **Implement retry logic** - Handle temporary failures gracefully
3. **Verify signatures** - Always check HMAC signatures
4. **Use HTTPS** - Webhook URLs must use HTTPS
5. **Log events** - Keep audit trail of webhook deliveries

## Related Endpoints

<CardGroup cols={2}>
  <Card title="List Webhooks" icon="list" href="/api-reference/webhooks/list">
    View all webhooks
  </Card>
  <Card title="Get Webhook" icon="webhook" href="/api-reference/webhooks/get">
    Get webhook details
  </Card>
  <Card title="Delete Webhook" icon="trash" href="/api-reference/webhooks/delete">
    Remove webhook
  </Card>
</CardGroup>
