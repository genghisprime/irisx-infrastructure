---
title: 'Ruby SDK'
description: 'Official Tazzi Ruby SDK for seamless integration'
---

## Installation

Install the Tazzi SDK via Gemfile:

```ruby
gem 'tazzi'
```

Or install directly:

```bash
gem install tazzi
```

## Quick Start

```ruby
require 'tazzi'

# Initialize with API key
tazzi = Tazzi::Client.new(api_key: 'your_api_key_here')

# Make your first call
call = tazzi.calls.create(
  to: '+15551234567',
  from: '+15559876543',
  record: true
)

puts "Call initiated: #{call.uuid}"
```

## Authentication

### API Key (Recommended)

```ruby
require 'tazzi'

irisx = Tazzi::Client.new(api_key: 'your_api_key_here')
```

### JWT Token (For User Auth)

```ruby
require 'tazzi'

irisx = Tazzi::Client.new(token: 'your_jwt_token_here')

# Handle token refresh
tazzi.on_token_refresh do |new_token|
  puts "Token refreshed: #{new_token}"
  # Save new token to secure storage
end
```

## Making Calls

### Create Outbound Call

```ruby
call = tazzi.calls.create(
  to: '+15551234567',
  from: '+15559876543',
  webhook_url: 'https://yourapp.com/webhooks',
  record: true,
  timeout: 60,
  metadata: {
    customer_id: 'cust_123',
    order_id: 'order_456'
  }
)

puts "Call UUID: #{call.uuid}"
```

### Get Call Details

```ruby
call = tazzi.calls.get('123e4567-e89b-12d3-a456-426614174000')

puts "Status: #{call.status}"
puts "Duration: #{call.duration}s"
puts "Cost: $#{call.cost}"
```

### List Calls

```ruby
calls = tazzi.calls.list(
  status: 'completed',
  direction: 'outbound',
  start_date: '2025-10-01',
  end_date: '2025-10-31',
  page: 1,
  limit: 50
)

puts "Found #{calls.pagination.total} calls"

calls.data.each do |call|
  puts "#{call.uuid}: #{call.status}"
end
```

## Sending SMS

### Send Single Message

```ruby
message = tazzi.sms.send(
  to: '+15551234567',
  from: '+15559876543',
  body: 'Hello! This is a test message.',
  webhook_url: 'https://yourapp.com/webhooks/sms'
)

puts "Message ID: #{message.id}"
```

### Send MMS with Media

```ruby
message = tazzi.sms.send(
  to: '+15551234567',
  from: '+15559876543',
  body: 'Check out this image!',
  media_urls: [
    'https://example.com/image.jpg'
  ]
)
```

### Bulk SMS

```ruby
result = tazzi.sms.send_bulk(
  from: '+15559876543',
  recipients: [
    { to: '+15551111111', body: 'Message 1' },
    { to: '+15552222222', body: 'Message 2' },
    { to: '+15553333333', body: 'Message 3' }
  ]
)

puts "Sent: #{result.successful}, Failed: #{result.failed}"
```

### Using Templates

```ruby
# Create template
template = tazzi.sms.create_template(
  name: 'welcome',
  body: 'Hi {{name}}, welcome to {{company}}!'
)

# Send with template
message = tazzi.sms.send_template(
  to: '+15551234567',
  from: '+15559876543',
  template_id: template.id,
  variables: {
    name: 'John',
    company: 'IRISX'
  }
)
```

## Sending Email

```ruby
email = tazzi.email.send(
  to: 'customer@example.com',
  from: 'noreply@yourcompany.com',
  subject: 'Welcome to Our Service',
  body_html: '<h1>Welcome!</h1><p>Thanks for signing up!</p>',
  body_text: 'Welcome! Thanks for signing up!',
  track_opens: true,
  track_clicks: true
)

puts "Email sent: #{email.id}"
```

## Webhooks

### Create Webhook

```ruby
webhook = tazzi.webhooks.create(
  url: 'https://yourapp.com/webhooks/tazzi',
  events: [
    'call.completed',
    'call.failed',
    'sms.delivered',
    'sms.failed'
  ],
  description: 'Production webhook'
)

puts "Webhook ID: #{webhook.id}"
puts "Secret: #{webhook.secret}"  # Save this!
```

### List Webhooks

```ruby
webhooks = tazzi.webhooks.list

webhooks.each do |webhook|
  puts "#{webhook.id}: #{webhook.url}"
end
```

### Verify Webhook Signature

```ruby
require 'openssl'

def verify_webhook_signature(payload, signature, secret)
  expected_signature = OpenSSL::HMAC.hexdigest(
    'SHA256',
    secret,
    payload.to_json
  )

  OpenSSL::HMAC.secure_compare(expected_signature, signature)
end

# With Rails
class WebhooksController < ApplicationController
  skip_verification_before_action :verify_authenticity_token, only: :irisx

  def irisx
    signature = request.headers['X-Tazzi-Signature']
    payload = request.body.read

    unless verify_webhook_signature(JSON.parse(payload), signature, ENV['TAZZI_WEBHOOK_SECRET'])
      head :unauthorized
      return
    end

    # Process webhook
    event_data = JSON.parse(payload)
    event = event_data['event']
    data = event_data['data']

    head :ok
  end

  private

  def verify_webhook_signature(payload, signature, secret)
    expected_signature = OpenSSL::HMAC.hexdigest(
      'SHA256',
      secret,
      payload.to_json
    )

    OpenSSL::HMAC.secure_compare(expected_signature, signature)
  end
end
```

## Phone Numbers

### Search Available Numbers

```ruby
numbers = tazzi.phone_numbers.search(
  country: 'US',
  area_code: '415',
  type: 'local',
  limit: 10
)

numbers.each do |number|
  puts "#{number.number} - $#{number.monthly_cost}/mo"
end
```

### Purchase Number

```ruby
number = tazzi.phone_numbers.purchase(
  phone_number: '+14155551234',
  friendly_name: 'Support Line'
)

puts "Purchased: #{number.number}"
```

### Configure Number

```ruby
tazzi.phone_numbers.update(
  number_id,
  voice_webhook_url: 'https://yourapp.com/webhooks/voice',
  sms_webhook_url: 'https://yourapp.com/webhooks/sms',
  friendly_name: 'Main Support Line'
)
```

## Analytics

### Get Dashboard Stats

```ruby
stats = tazzi.analytics.dashboard(
  start_date: '2025-10-01',
  end_date: '2025-10-31'
)

puts "Total Calls: #{stats.calls.total}"
puts "Total SMS: #{stats.sms.total}"
puts "Total Cost: $#{stats.calls.total_cost + stats.sms.total_cost}"
```

### Call Analytics

```ruby
analytics = tazzi.analytics.calls(
  start_date: '2025-10-01',
  end_date: '2025-10-31',
  group_by: 'day'
)

analytics.data.each do |day|
  puts "#{day.date}: #{day.total_calls} calls"
end
```

## Error Handling

```ruby
require 'tazzi'
require 'tazzi/errors'

begin
  call = tazzi.calls.create(
    to: '+15551234567',
    from: '+15559876543'
  )
rescue Tazzi::RateLimitError => e
  puts "Rate limited - retry after: #{e.retry_after}s"
  # Wait and retry
  sleep(e.retry_after)
rescue Tazzi::ValidationError => e
  puts "Validation error: #{e.message}"
  puts "Details: #{e.details.inspect}"
rescue Tazzi::Error => e
  puts "API Error: #{e.message}"
  puts "Code: #{e.code}"

  if e.code == 'INSUFFICIENT_FUNDS'
    puts "Low balance - add credits"
  end
rescue StandardError => e
  puts "Unexpected error: #{e.message}"
end
```

### Exception Types

Ruby SDK includes specific exception classes:

```ruby
require 'tazzi/errors'

begin
  number = tazzi.phone_numbers.get('invalid_id')
rescue Tazzi::NotFoundError
  puts "Phone number not found"
rescue Tazzi::AuthenticationError
  puts "Authentication failed - check your API key"
rescue Tazzi::Error => e
  puts "Error: #{e.message}"
end
```

## Advanced Features

### Automatic Retry with Exponential Backoff

```ruby
irisx = Tazzi::Client.new(
  api_key: 'your_api_key_here',
  retry: {
    enabled: true,
    max_retries: 3,
    base_delay: 1,      # 1 second
    max_delay: 30       # 30 seconds
  }
)
```

### Custom Timeout

```ruby
irisx = Tazzi::Client.new(
  api_key: 'your_api_key_here',
  timeout: 60  # 60 seconds
)
```

### Logging

```ruby
require 'logger'

logger = Logger.new(STDOUT)
logger.level = Logger::DEBUG

irisx = Tazzi::Client.new(
  api_key: 'your_api_key_here',
  logger: logger
)
```

## Environment Variables

```bash
# .env file
TAZZI_API_KEY=your_api_key_here
TAZZI_API_URL=https://api.tazzi.com
TAZZI_WEBHOOK_SECRET=your_webhook_secret
```

```ruby
require 'dotenv/load'
require 'tazzi'

irisx = Tazzi::Client.new(
  api_key: ENV['TAZZI_API_KEY'],
  base_url: ENV['TAZZI_API_URL']
)
```

## Best Practices

<CardGroup cols={2}>
  <Card title="Use Environment Variables" icon="key">
    Store credentials in ENV, never in version control
  </Card>
  <Card title="Handle Exceptions" icon="triangle-exclamation">
    Always rescue specific exceptions first, then general
  </Card>
  <Card title="Enable Retries" icon="rotate">
    Use automatic retry for transient network issues
  </Card>
  <Card title="Verify Webhooks" icon="shield-check">
    Always verify webhook signatures with OpenSSL
  </Card>
  <Card title="Use Ruby Conventions" icon="code">
    Follow Ruby style guide for naming and formatting
  </Card>
  <Card title="Log Events" icon="file-lines">
    Use Logger for tracking API calls and errors
  </Card>
</CardGroup>

## Examples

Full working examples available at [github.com/tazzi/examples](https://github.com/tazzi/examples):

- Simple outbound call
- IVR menu with DTMF handling
- SMS campaign with templates
- Webhook handler with Rails
- Call recording and transcription
- Sidekiq background jobs

## Support

- üìö [Full API Reference](/api-reference)
- üí¨ [Discord Community](https://discord.gg/tazzi)
- üêõ [GitHub Issues](https://github.com/tazzi/sdk-ruby/issues)
- üìß Email: support@tazzi.com

## Next Steps

<CardGroup cols={2}>
  <Card title="API Reference" icon="book" href="/api-reference">
    Explore all endpoints
  </Card>
  <Card title="Code Examples" icon="code" href="https://github.com/tazzi/examples">
    See working examples
  </Card>
</CardGroup>
